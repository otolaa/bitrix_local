var showMessage=function(l,j,f,g){$(".popup-form").remove();$(".modal-backdrop").remove();var i=["modal-md","modal-lg","modal-xl"];var g=(g?g:0);var f=(f?f:false);var h=(h?h:"Отправить");var j=(j?j:"Сообщение");var a=$("<div/>").addClass("modal-header").append('<h5 class="modal-title">'+j+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>');var k=$("<div/>").addClass("modal-body").append(l);var e=(f?$("<div/>").addClass("modal-footer").append('<button type="button" class="btn btn-default" data-dismiss="modal">'+f+"</button>"):$("<div/>").addClass("modal-footer"));var d=$("<div/>").addClass("modal-content").append(a).append(k).append(e);var c=$("<div/>").addClass("modal-dialog modal-dialog-centered").addClass(i[g]).html(d);var b=$("<div/>").addClass("popup-form").addClass("modal").addClass("fade").attr("tabindex",-1).attr("role","dialog").attr("aria-labelledby","popup-form").append(c).appendTo("body");$(".popup-form").modal()};var showWait=function(){$(".showWait").remove();var a=window.pageYOffset||document.documentElement.scrollTop;a=a+200;$("<div/>").addClass("showWait").css("top",a+"px").append('<img src="/static/loading_ico.svg">').appendTo("body");return false};var closeWait=function(){$(".showWait").remove();return false};var addFormSubmitNew=function(e){e.preventDefault();var d=$(this).find("[required]"),a=$(this).find("button[type=submit]");var c=false;var b=$(this).attr("action");d.each(function(){if($(this).attr("type")!="checkbox"){if($(this).val()==""){$(this).css({"border-color":"#dc3545",color:"#dc3545"});if($(this).parent().find(".req-notice").length==0){}c=true}else{$(this).css({"border-color":"#9a9da0",color:"#000"});$(this).parent().find(".req-notice").remove()}}if($(this).attr("type")!="checkbox"&&$(this).val()!=""&&$(this).attr("type")=="email"){var f=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(f.test($(this).val())==false){$(this).css({"border-color":"#dc3545",color:"#dc3545"});c=true}}if($(this).attr("type")=="checkbox"){if($(this).prop("checked")==false){$(this).parent().find("span").css({"border-color":"#dc3545"});if($(this).parent().parent().find(".req-notice").length==0){}c=true}else{$(this).parent().parent().find("span").css({background:"","border-color":"",color:""});$(this).parent().parent().find(".req-notice").remove()}}});if(c){return false}$.ajax({url:b,type:$(this).attr("method"),dataType:"JSON",data:new FormData(this),processData:false,contentType:false,beforeSend:function(){a.attr("disabled","disabled");showWait()},complete:function(){a.removeAttr("disabled");closeWait()},success:function(f){if(f.redirect_URL){if(f.html){showMessage(f.html,f.title,f.cansel)}window.location.replace(f.redirect_URL)}else{if(f.error){showMessage(f.error,f.title,f.cansel,f.mClass);if(f.jq){JQ(f.jq)}}else{if(f.alert){showMessage(f.alert,f.title,f.cansel,f.mClass);if(f.jq){JQ(f.jq)}}else{if(f.reload){window.location.replace(document.URL)}else{if(f.setcookie){setcookie(f.setcookie,f.value,f.expires,f.path,f.domain,f.secure);if(f.jq){JQ(f.jq)}if(f.redirect_link){window.location.replace(f.redirect_link)}}else{if(f.jq){JQ(f.jq)}else{}}}}}}},error:function(f){console.log(f)}});return false};var JQ=function(a){$.each(a,function(b,c){switch(b){case"remove":$.each(c,function(d,e){$(d).remove()});break;case"val":case"html":case"text":case"prepend":case"append":case"hide":case"show":$.each(c,function(d,e){$(d)[b](e)});break;case"attr":$.each(c,function(d,e){$(d).attr({rel:e})});break;case"attributeName":$.each(c,function(d,e){$.each(e,function(g,f){$(d).attr(g,f)})});break;case"CSS":$.each(c,function(d,e){$.each(e,function(g,f){$(d).css(g,f)})});break;case"reset":$.each(c,function(d,e){$(d).trigger("reset")});break;case"replaceWith":$.each(c,function(d,e){$(d).replaceWith(e)});break;case"modal":$.each(c,function(d,e){$(d).modal(e)});break;case"reCaptcha":grecaptcha.ready(function(){grecaptcha.execute(c.tokenKey,{action:c.sid}).then(function(d){var e=document.getElementById(c.recaptchaResponse);e.value=d})});break}})};$(document).ready(function(){$("body").on("click",'[href*="#"]',function(b){b.preventDefault();var a=60;$("html,body").stop().animate({scrollTop:$(this.hash).offset().top-a},1000);return false});$(document).on("submit","form.SubmitFormAjax",addFormSubmitNew)});